<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Blog Name</title>
  <subtitle>Blog subtitle</subtitle>
  <id>http://blog.url.com/</id>
  <link href="http://blog.url.com/"/>
  <link href="http://blog.url.com/feed.xml" rel="self"/>
  <updated>2014-02-24T00:00:00Z</updated>
  <author>
    <name>Blog Author</name>
  </author>
  <entry>
    <title>Jenkins のプラギンを作ってみたくなった</title>
    <link rel="alternate" href="http://blog.url.com/2014/02/24/02-development-of-jenkins-plugin.html"/>
    <id>http://blog.url.com/2014/02/24/02-development-of-jenkins-plugin.html</id>
    <published>2014-02-24T00:00:00Z</published>
    <updated>2014-02-24T15:01:18+00:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;Android アプリ開発をやり初めてから Java にまた慣れてきたこともあって、今度は Jenkins の Plugin を作ってみたくなった。&lt;/p&gt;

&lt;p&gt;Jenkins のプラグインを開発するためには何が必要か調べてみた。だいぶ前に調べたときは maven が必須だったはずだけど、&lt;a href="https://jenkins-ci.org/node/363"&gt;いまは Gradle を使ってビルドできる&lt;/a&gt;そうだ。
具体的な方法は&lt;a href="https://wiki.jenkins-ci.org/display/JENKINS/Gradle+JPI+Plugin"&gt;この Wiki のページ&lt;/a&gt;に書いてある。その内容を適当に訳したものを以下に書いておく。&lt;/p&gt;

&lt;h2 id="section"&gt;必要条件&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Gradle 1.0 milestone 6 以上&lt;/li&gt;
  &lt;li&gt;プラグインが Jenkins 1.420 以上を対象にビルドされること&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id="section-1"&gt;初期化&lt;/h2&gt;

&lt;p&gt;プラグイン用のプロジェクトディレクトリは、プラグイン名が &lt;code&gt;foo&lt;/code&gt; だったら、&lt;code&gt;foo&lt;/code&gt; または &lt;code&gt;foo-plugin&lt;/code&gt; にする必要がある。そして、&lt;code&gt;build.gradle&lt;/code&gt; に次の内容を書く:&lt;/p&gt;

&lt;pre&gt;&lt;code class="language-groovy"&gt;apply from:"https://raw.github.com/jenkinsci/gradle-jpi-plugin/master/install"
// Or copy the contents of that URL into your build.gradle directly.

// Whatever other plugins you need to load.

groupId = "org.jenkins-ci.plugins"
version = "0.0.1-SNAPSHOT"    // Or whatever your version is.
description = "A description of your plugin"

jenkinsPlugin {
    coreVersion = '1.420'                                               // Version of Jenkins core this plugin depends on.
    displayName = 'Hello World plugin built with Gradle'                // Human-readable name of plugin.
    url = 'http://wiki.jenkins-ci.org/display/JENKINS/SomePluginPage'   // URL for plugin on Jenkins wiki or elsewhere.
    gitHubUrl = 'https://github.com/jenkinsci/some-plugin'              // Plugin URL on GitHub. Optional.

   // The developers section is optional, and corresponds to the POM developers section.
   developers {
       developer {
           id 'abayer'
           name 'Andrew Bayer'
           email 'andrew.bayer@gmail.com'
       }
   }                           

}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;もし追加で必要なリポジトリが存在するなら、それを &lt;code&gt;jenkinsPlugin&lt;/code&gt; セクションの後ろに追記する。&lt;/p&gt;

&lt;h2 id="section-2"&gt;ビルド&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;gradle celan jpi&lt;/code&gt; を実行する。&lt;/p&gt;

&lt;h2 id="section-3"&gt;テスト&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;gradle test&lt;/code&gt; で全ユニットテストを実行できる。maven と違ってテストは自動的に実行されない。&lt;/li&gt;
  &lt;li&gt;手動テスト用に Jenkins を起動したい場合は &lt;code&gt;gradle server&lt;/code&gt; を実行する。Jenkins はポート 8080 で起動する。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id="section-4"&gt;リリース&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;自動的にリリースすることはないので、今の状態がリリース可能かどうかは各自で管理すること。&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;gradle clean uploadArchives&lt;/code&gt; を実行すればリリースできる。このコマンドは、プラグインをビルドし、Jenkins の Maven リポジトリへデプロイする。
    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;Jenkins Maven リポジトリへアクセスするためのユーザ情報を、&lt;code&gt;~/.jenkins-ci.org&lt;/code&gt; に以下のように書いておくこと。&lt;/p&gt;

        &lt;pre&gt;&lt;code&gt;userName=yourusername
password=yourpassword
&lt;/code&gt;&lt;/pre&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;&lt;code&gt;gradle clean deploy&lt;/code&gt; でもリリースできる。&lt;code&gt;deploy&lt;/code&gt; タスクは &lt;code&gt;uploadArchives&lt;/code&gt; のエイリアスになってる。&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id="section-5"&gt;例&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href="https://github.com/jenkinsci/associated-files-plugin"&gt;Associated File Plugin&lt;/a&gt; は Gradle でビルドとリリースが行なわれている。&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/jenkinsci/git-plugin"&gt;Git plugin&lt;/a&gt; はまだ Maven で運用されてるけど、&lt;code&gt;build.gradle&lt;/code&gt; が追加されている。&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/jenkinsci/hello-world-plugin"&gt;Hello World plugin&lt;/a&gt; も参考になるはず。&lt;/li&gt;
&lt;/ul&gt;
</content>
  </entry>
  <entry>
    <title>Ruby 2.1.1 リリース</title>
    <link rel="alternate" href="http://blog.url.com/2014/02/24/01-ruby-2.1.1-is-released.html"/>
    <id>http://blog.url.com/2014/02/24/01-ruby-2.1.1-is-released.html</id>
    <published>2014-02-24T00:00:00Z</published>
    <updated>2014-02-24T15:01:18+00:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;今日、2月24日は Ruby の誕生日。おめでとうございます。&lt;/p&gt;

&lt;p&gt;そんな日に &lt;a href="https://www.ruby-lang.org/en/news/2014/02/24/ruby-2-1-1-is-released/"&gt;Ruby 2.1.1 がリリースされた&lt;/a&gt;。ありがとうございます。&lt;/p&gt;

</content>
  </entry>
  <entry>
    <title>診察券は必要なんだろうか</title>
    <link rel="alternate" href="http://blog.url.com/2014/02/22/01-consultation-ticket.html"/>
    <id>http://blog.url.com/2014/02/22/01-consultation-ticket.html</id>
    <published>2014-02-22T00:00:00Z</published>
    <updated>2014-02-24T15:01:18+00:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;今日は、昨日に引き続き風邪と闘う一日だった。&lt;/p&gt;

&lt;p&gt;昨日は診察券を持たずに耳鼻科へ行ったところ、病院のデータベースから来院歴を検索して、ちょうど2年前に訪れていたことが判明したのだった。
ということは、次回も診察券を持たずに行っても大丈夫ってことにならないだろうか？何故診察券は必要なのだろう？&lt;/p&gt;

&lt;p&gt;次回の来院時には保険証が変わってるかもしれないからかな？&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>風邪をひいた</title>
    <link rel="alternate" href="http://blog.url.com/2014/02/21/got-a-cold.html"/>
    <id>http://blog.url.com/2014/02/21/got-a-cold.html</id>
    <published>2014-02-21T00:00:00Z</published>
    <updated>2014-02-24T15:01:18+00:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;朝6:00頃に目覚めたと思う。喉がかなり痛かった。今日出勤してもまともに仕事できなそうだし、症状が酷くなったり他人に伝染させたりすると厄介だから欠勤することにした。&lt;/p&gt;

&lt;p&gt;「そういえば前に近くの耳鼻科に行ったことがあったなぁ」と思い出してネットで調べてみると、それが望月医院であることがわかった。8:30過ぎじゃないと電話が通じないっぽいので二度寝した。&lt;/p&gt;

&lt;p&gt;9:30に再び目覚めたとき、最初よりも具合が悪くなっていた。望月医院に電話してみると、予約制じゃないから来た順に診るという。さっさと着替えて病院へ向かおうと思い、診察券を探したのだが見付からない。でも具合は悪いので諦めて病院へ向かった。&lt;/p&gt;

&lt;p&gt;窓口で診察券が無い事を告げると、記録を調べてくれた。すると、ちょうど2年前に来院していたらしい。なんという偶然だろうか。
診察室に通さるとすぐに喉の状態を観察された・・・かと思ったら、すぐに喉と鼻腔に薬をピュピュっとかけられ、吸引させられ、15分もかからずに終わってしまった。すごい体験だった。
帰りに食料とマスクを買い、調剤薬局で薬を買った。帰宅したらすぐに買ってきたいちごを食べ、薬を飲んで寝た。&lt;/p&gt;

&lt;p&gt;次に起きたのは14時頃だったと思う。寝る前よりもさらに具合が悪く、体も怠くて大変だった。頭痛もしていたのでロキソニンを飲んで再び横になった。なかなか寝付けなかったが、ロキソニンが効いてくるに従い具合が良くなっていくのが分かって楽しかった。&lt;/p&gt;

&lt;p&gt;んで、そのあと寝たり起きたりして紆余曲折あって寿司を食べた。&lt;/p&gt;

&lt;p&gt;おやすみなさい。&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>RIP Jim Weirich</title>
    <link rel="alternate" href="http://blog.url.com/2014/02/20/jimweirich.html"/>
    <id>http://blog.url.com/2014/02/20/jimweirich.html</id>
    <published>2014-02-20T00:00:00Z</published>
    <updated>2014-02-24T15:01:18+00:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;Jim Weirich が亡くなったそうだ。一昨年の RubyConf 2012 で Y combinator をライブコーディングしていた姿が眩しかった、僕にとっては一人のヒーローだった。&lt;/p&gt;

&lt;p&gt;ありがとうございました。&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>年齢が帰れと言っている</title>
    <link rel="alternate" href="http://blog.url.com/2014/02/19/age.html"/>
    <id>http://blog.url.com/2014/02/19/age.html</id>
    <published>2014-02-19T00:00:00Z</published>
    <updated>2014-02-24T15:01:18+00:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;blockquote class="twitter-tweet" lang="en"&gt;&lt;p&gt;年齢が帰れと言っている&lt;/p&gt;&amp;mdash; 老害エンジニアの中の若手, Ph.D (@mrkn) &lt;a href="https://twitter.com/mrkn/statuses/436116668608024576"&gt;February 19, 2014&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;

</content>
  </entry>
</feed>
